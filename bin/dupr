#!/bin/sh
set -e

usage () {
	echo "\033[1;38;5;162m-- Dasteriskian User Package Repo Kit --\033[0m"
	echo "Usage: $0 action [args]"
	echo ""
	echo "Actions"
	echo "   build <.durpkg file>    Build .deb packages from .durpkg file."
	echo "   help                    Print this usage information"
}

case "$1" in
	search)
		shift
		grep -ri $1 ;;
	b|build)
		shift
		echo "\033[1;38;5;162m→ Unfolding \033[1;36m$1\033[1;38;5;162m into shell script and debian/ directory ...\033[0m"
		unfold -f $1
		echo "\033[1;38;5;162m→ Triggering build for \033[1;36m$1\033[1;38;5;162m ...\033[0m"
		bash $1.sh
		echo "\033[1;38;5;162m→ Complete: \033[1;36m$1\033[1;38;5;162m\033[0m"
		;;
	*)
		usage;;
esac
